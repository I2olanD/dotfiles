# SudoLang v2.0 Compliance & Consistency Audit

**Date**: 2026-02-22
**Scope**: Full framework (35 agents, 10 commands, 42 skills — 87 files total)
**Reference**: [SudoLang v2.0 Specification](https://github.com/paralleldrive/sudolang)

---

## Executive Summary

The Startup framework implements a **pragmatic subset (~30%)** of SudoLang v2.0. The philosophical core (natural language as spec, markdown as code, curly-brace blocks) is well-applied across all 87 files. However, most structured language constructs are absent, and cross-file consistency has 25 identified issues.

---

## SudoLang v2.0 Feature Coverage

| Construct | Agents (35) | Commands (10) | Skills (42) | Total | Status |
|-----------|:-----------:|:-------------:|:-----------:|:-----:|--------|
| Curly-brace blocks | 35/35 | 10/10 | 42/42 | 87/87 | CORRECT |
| Natural language constraints | 35/35 | 10/10 | 42/42 | 87/87 | CORRECT |
| Markdown as code | 35/35 | 10/10 | 42/42 | 87/87 | CORRECT |
| `=>` semantic arrows | 0/35 | ~5/10 | 7/42 | ~12/87 | PARTIAL |
| `$variable` interpolation | 0/35 | 10/10 | 1/42 | 11/87 | PARTIAL |
| `require { } / never { }` | 0/35 | 0/10 | 0/42 | 0/87 | ABSENT |
| Pipe operator `\|>` | 0/35 | 0/10 | 0/42 | 0/87 | ABSENT |
| Formal interfaces | 0/35 | 0/10 | 0/42 | 0/87 | ABSENT |
| `/command` syntax | 0/35 | 0/10 | 0/42 | 0/87 | ABSENT |
| Modifier syntax | 0/35 | 0/10 | 0/42 | 0/87 | ABSENT |
| Options blocks | 0/35 | 0/10 | 0/42 | 0/87 | ABSENT |

---

## Critical Issues

### 1. Broken Reference: `exploratory-testing` skill does not exist

- **Evidence**: `agent/the-qa-engineer/exploratory-testing.md:4` references skill `exploratory-testing`
- **Impact**: Agent cannot load its declared skill
- **Fix**: Create `skill/exploratory-testing/SKILL.md` or update the agent's skills list

### 2. Meta-Agent Contradicts All Sub-Agents (3 contradictions)

| What meta-agent says | What actually exists |
|---|---|
| `agent/the-meta-agent.md:43` — Prohibits `Constraints { }` blocks | All 33 sub-agents use `Constraints { }` |
| `agent/the-meta-agent.md:80` — Prohibits `## Decision` tables | Multiple agents contain decision tables |
| `agent/the-meta-agent.md:77` — Prescribes `Quality Standards` block | Zero agents use `Quality Standards`; all use `Constraints` instead |

- **Impact**: Any agent generated by the meta-agent will structurally differ from all existing agents
- **Fix**: Either update meta-agent to prescribe `Constraints { }` (match reality) or refactor all agents to use `Quality Standards` (match meta-agent vision)

### 3. `analyze.md` Has Contradictory Constraints

- **Line 27**: `"Display ALL agent responses - show complete agent findings to user, never summarize or omit"`
- **Line 33**: `"Synthesize only - never forward raw analyst messages to user, only synthesized output"`
- **Impact**: These directly conflict — one says show everything, the other says synthesize only
- **Fix**: Remove one constraint; likely keep "Display ALL" to match the pattern in `debug.md`, `refactor.md`, `simplify.md`, `specify.md`

### 4. `require { } / never { }` Syntax Never Used

- **Evidence**: All 87 files use flat `Constraints { }` blocks
- **Impact**: Negative constraints ("never X") are mixed with positive ones instead of being separated per SudoLang v2.0 spec
- **Many files contain explicit "Never" statements** that should be in `never { }` sub-blocks:
  - `analyze.md:26,33`, `constitution.md:26`, `debug.md:33`, `document.md:26`
  - `implement.md:26`, `refactor.md:26,31`, `review.md:16,24`
  - `simplify.md:32`, `validate.md:34,35`
  - Multiple agent files across all teams

---

## High Severity Issues

### 5. `specify.md` Missing `glob` from allowed-tools

- **Evidence**: `command/specify.md` frontmatter — 8 tools listed, all other commands with file operations include `glob`
- **Fix**: Add `glob` to allowed-tools

### 6. `review.md` Missing `write`/`edit` + Formatting Deviation

- **Evidence**: `command/review.md` frontmatter — only 7 tools; uses single-line YAML array format
- **Question**: Is this intentional (read-only review)? If so, document the rationale
- **Fix**: Align YAML format to multi-line; confirm tool set is intentional

### 7. `debug.md` Missing "Call skill tool FIRST" Constraint

- **Evidence**: All other 9 commands have explicit "Call skill tool FIRST" in their Constraints block; `debug.md` does not
- **Fix**: Add the constraint to `debug.md`

---

## Consistency Issues

### Block Naming — 6 Conflicts

| Purpose | Variant Names Used | Files Affected | Recommendation |
|---------|-------------------|----------------|----------------|
| Agent capabilities | `Focus`, `Activities`, `ReviewActivities`, `ElicitationActivities`, `ResearchActivities` | ~35 agents | Standardize to `Focus` |
| Agent process | `Approach`, `Workflow`, `ElicitationProcess`, `ResearchProcess` | ~35 agents | Standardize to `Approach` |
| Agent purpose | `Mission`, `Mindset` (sometimes both, inconsistent position) | ~20 agents | Pick one, standardize position |
| Severity ratings | `SeverityClassification`, `SeverityMatrix` | ~8 files | Standardize to `SeverityClassification` |
| Task delegation | `TaskDelegationTemplate`, `TaskDelegation` | 3 files | Standardize to `TaskDelegation` |
| Supporting files | `ReferenceFiles`, `ReferenceMaterials`, `SupportingFiles` | 3 files | Standardize to `ReferenceFiles` |

**Naming convention violation**: `command/refactor.md` uses `Preserved (immutable)` with parenthetical annotation — should be `PreservedImmutable` or `Preserved`.

### Constraint Block Formatting — 4 Styles

| Style | Count | Example Files |
|-------|-------|---------------|
| A: Numbered list (`1. 2. 3.`) | ~60 | `codebase-navigation`, `coding-conventions`, most skills and commands |
| B: Named sub-blocks | ~10 | `bug-diagnosis`, `safe-refactoring`, `task-delegation` |
| C: Plain statements | ~5 | `domain-driven-design`, `architecture-selection` |
| D: Markdown table | ~2 | `context-preservation` |

**Recommendation**: Standardize to one style. Pattern A (numbered) is most prevalent; Pattern B (named sub-blocks) is most expressive.

### YAML Frontmatter Inconsistencies

| Issue | Detail |
|-------|--------|
| Description quoting (sub-agents) | 8 quoted vs 25 unquoted; mixed even within `the-architect` group |
| Description quoting (skills) | 27 quoted vs 15 unquoted |
| Description quoting (commands) | All 10 quoted (consistent) |
| allowed-tools ordering | Only 5/10 commands share canonical order |
| allowed-tools format | `review.md` uses single-line; all others multi-line |

### Decision Table Placement

- **Architect agents**: Tables INSIDE main DSL block (e.g., `system-architecture.md:16-63`)
- **Platform-engineer agents**: Tables OUTSIDE after closing `}` (e.g., `ci-cd-pipelines.md:57-80`, `containerization.md:57-77`, `infrastructure-as-code.md:56-78`, `production-monitoring.md:54-76`)
- **Recommendation**: Standardize to inside or outside, not both

### Finding Template Inconsistencies

| Issue | Detail |
|-------|--------|
| ID format | `COMPAT-[NNN]`, `CPLX-[NNN]`, `SEC-[NNN]`, `DEP-[NNN]` use brackets; `CONC-NNN` does not |
| Field naming | `finding` (review agents) vs `issue` (validate command) for same concept |
| Field casing | PascalCase (`Affected Consumers`) vs lowercase (`package`, `impact`) |
| Severity scales | Review has 4 levels (CRITICAL/HIGH/MEDIUM/LOW); validate has 3 (HIGH/MEDIUM/LOW) |
| Command IDs | `review.md` uses `C1, H1, M1, L1`; `validate.md` uses `F[N], W[N]` |

### File Ending Patterns

| File Type | Pattern | Consistent? |
|-----------|---------|-------------|
| Agents (35) | `</example>` after `## Usage Examples` | YES |
| Commands (10) | `## Important Notes` bullet list | YES (except `debug.md` uses plain text instead of bold-dash) |
| Skills (42) | 20 end with `}`; 22 end with `## References` | NO — 50/50 split |

### Other

- **Free-floating prose**: `api-development.md:49` and `component-development.md:50` have sentences outside any block (other agents use `Mindset { }`)
- **Phase naming**: `implement.md` uses bare `Completion` instead of `PhaseN_Completion`
- **Duplicate heading**: `the-meta-agent.md` has two `## Usage Examples` headings (lines 129, 138)
- **Orphaned skills** (not referenced by any agent): `accessibility-design`, `agent-coordination`, `context-preservation`, `documentation-sync`, `git-workflow`, `implementation-verification`
- **`implement.md:20`**: Uses `**$ARGUMENTS**` without descriptive label; all other commands use `**Label**: $ARGUMENTS`
- **`specify.md:22`**: Colon inside bold (`**Description:**`) vs outside (`**Description**:`) in all others

---

## Structural Templates

### Agent Standard

```
---
description: "..."
mode: subagent
skills: skill-a, skill-b, skill-c
---

# Agent Name

Roleplay as a [role] that [does X].

AgentName {
  Focus { ... }
  Approach { ... }
  Deliverables { ... }
  Constraints { ... }
}

## Usage Examples
<example>...</example>
```

### Command Standard

```
---
description: "..."
argument-hint: "..."
allowed-tools:
  - todowrite
  - bash
  - write
  - edit
  - read
  - glob
  - grep
  - question
  - skill
---

# Command Name

Roleplay as a [role] that [does X].

**Label**: $ARGUMENTS

CommandName {
  Constraints { ... }
  [Domain blocks]
  Workflow {
    Phase1_Name { ... }
    Phase2_Name { ... }
    ...
  }
}

## Important Notes
- **Bold label** - explanation
```

### Skill Standard

```
---
name: skill-name
description: "..."
license: MIT
compatibility: opencode
metadata:
  category: "category"
  version: "1.0"
---

# Skill Name

Roleplay as a [role] that [does X].

SkillName {
  Activation { ... }
  Constraints { ... }
  [Domain blocks]
}
```

---

## Issue Summary

| Severity | Count | Key Items |
|----------|-------|-----------|
| Critical | 3 | Broken `exploratory-testing` reference, meta-agent contradictions (x3) |
| High | 4 | `analyze.md` contradiction, `specify.md` missing `glob`, `review.md` missing tools, constraint syntax |
| Medium | 10 | Block naming (x6), YAML quoting, tools ordering, finding fields, content placement |
| Low | 8 | Free-floating prose, debug.md notes, skill endings, phase naming, duplicate heading, orphaned skills |
| **Total** | **25** | |

---

## Open Questions

1. Should the meta-agent be updated to match reality (`Constraints { }`) or should agents be refactored to match the meta-agent's vision (`Quality Standards`)?
2. Which constraint format should be standard — numbered lists (Pattern A) or named sub-blocks (Pattern B)?
3. Should `require { } / never { }` syntax be adopted across all files for SudoLang v2.0 compliance?
4. Should all skills have `## References` or none?
5. Is `review.md` intentionally missing `write`/`edit` (read-only review)?
6. Was the pragmatic SudoLang subset intentional, or is full v2.0 compliance desired?
